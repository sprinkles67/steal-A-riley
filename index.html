<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Steal a Riley</title>
<style>
  body {
    margin: 0;
    background: pink;
    font-family: Arial, sans-serif;
    overflow: hidden;
    text-align: center;
    color: white;
  }
  #menu, #scoreBoard, #playAgainBtn {
    margin-top: 20px;
  }
  canvas {
    background: pink;
    display: none;
    margin-top: 20px;
    border: 2px solid white;
  }
  h1 {
    font-size: 48px;
    background: linear-gradient(45deg, #ff0080, #ffcc00, #00ffcc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 20px rgba(255, 192, 203, 0.8);
  }
  button {
    padding: 10px 20px;
    margin: 5px;
    font-size: 20px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: white;
    color: #ff0080;
    font-weight: bold;
    transition: transform 0.2s;
  }
  button:hover {
    transform: scale(1.1);
  }
  #timerBar {
    position: absolute;
    top: 0;
    left: 0;
    height: 15px;
    background: linear-gradient(90deg, #00ffcc, #ff00ff);
    transition: width 1s linear;
  }
</style>
</head>
<body>
  <h1>Steal a Riley</h1>
  <div id="menu">
    <button onclick="startGame('easy')">Easy</button>
    <button onclick="startGame('hard')">Hard</button>
  </div>
  <div id="scoreBoard"></div>
  <div id="timerBar"></div>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <button id="playAgainBtn" onclick="showMenu()" style="display:none;">Play Again</button>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreBoard = document.getElementById("scoreBoard");
const playAgainBtn = document.getElementById("playAgainBtn");
const timerBar = document.getElementById("timerBar");

let brainrots = [];
let players = [];
let gameRunning = false;
let targetScore = 10;
let difficulty = "easy";
let roundTime = 15;
let timerId;
let confetti = [];

class Brainrot {
  constructor(x, y, fake=false) {
    this.x = x;
    this.y = y;
    this.size = 15;
    this.fake = fake;
  }
  draw() {
    ctx.beginPath();
    ctx.fillStyle = this.fake ? "black" : "white";
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
  }
}

class Player {
  constructor(name, bot=false, color="yellow", botSkill=1) {
    this.name = name;
    this.bot = bot;
    this.score = 0;
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.color = color;
    this.botSkill = botSkill; // speed advantage
  }
  update() {
    if (this.bot) {
      let target = brainrots[Math.floor(Math.random() * brainrots.length)];
      if (target) {
        this.x += (target.x - this.x) * 0.03 * this.botSkill;
        this.y += (target.y - this.y) * 0.03 * this.botSkill;
        if (Math.hypot(this.x - target.x, this.y - target.y) < 20) {
          if (target.fake) this.score = Math.max(0, this.score - 1);
          else this.score++;
          brainrots.splice(brainrots.indexOf(target), 1);
        }
      }
    }
  }
  drawCharacter() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, 20, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();
    ctx.fillStyle = "blue";
    ctx.beginPath(); ctx.arc(this.x - 7, this.y - 5, 4, 0, Math.PI * 2); ctx.fill();
    ctx.beginPath(); ctx.arc(this.x + 7, this.y - 5, 4, 0, Math.PI * 2); ctx.fill();
    ctx.strokeStyle = "black";
    ctx.beginPath(); ctx.arc(this.x, this.y + 5, 8, 0, Math.PI); ctx.stroke();
  }
}

class Confetti {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.size = Math.random() * 6 + 4;
    this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
    this.dx = (Math.random() - 0.5) * 6;
    this.dy = Math.random() * -6 - 2;
    this.gravity = 0.2;
  }
  update() {
    this.x += this.dx;
    this.y += this.dy;
    this.dy += this.gravity;
    ctx.fillStyle = this.color;
    ctx.fillRect(this.x, this.y, this.size, this.size);
  }
}

function startGame(mode) {
  difficulty = mode;
  targetScore = (mode === "hard") ? 30 : 10;
  document.getElementById("menu").style.display = "none";
  canvas.style.display = "block";
  playAgainBtn.style.display = "none";

  brainrots = [];
  players = [];
  confetti = [];

  // player 1
  players.push(new Player("You", false, "yellow"));

  // both easy and hard have bots
  players.push(new Player("Bot 1", true, "red", mode === "hard" ? 1.1 : 0.8));
  players.push(new Player("Bot 2", true, "green", mode === "hard" ? 1.1 : 0.8));

  // brainrots
  for (let i = 0; i < (mode === "hard" ? 15 : 10); i++) {
    brainrots.push(new Brainrot(
      Math.random() * canvas.width,
      Math.random() * canvas.height,
      mode === "hard" && Math.random() < 0.2 // easier hard: fewer fakes
    ));
  }

  players.forEach(p => p.score = 0);
  gameRunning = true;
  roundTime = 15;
  updateScoreboard();
  animate();

  // timer bar setup
  timerBar.style.width = "100%";
  timerBar.style.display = "block";

  clearInterval(timerId);
  timerId = setInterval(() => {
    roundTime--;
    timerBar.style.width = `${(roundTime/15)*100}%`;
    updateScoreboard();
    if (roundTime <= 0) {
      clearInterval(timerId);
      endGame();
    }
  }, 1000);
}

canvas.addEventListener("click", (e) => {
  if (!gameRunning) return;
  const rect = canvas.getBoundingClientRect();
  const mouseX = e.clientX - rect.left;
  const mouseY = e.clientY - rect.top;

  for (let i = brainrots.length - 1; i >= 0; i--) {
    const br = brainrots[i];
    const dist = Math.hypot(mouseX - br.x, mouseY - br.y);
    if (dist < br.size) {
      let me = players[0];
      if (br.fake) me.score = Math.max(0, me.score - 1);
      else me.score++;
      brainrots.splice(i, 1);
      checkWin(me);
    }
  }
});

function updateScoreboard() {
  scoreBoard.innerText =
    `Time: ${roundTime}s | ` +
    players.map(p => `${p.name}: ${p.score}`).join(" | ");
}

function animate() {
  if (!gameRunning) return;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  brainrots.forEach(b => b.draw());
  players.forEach(p => { p.update(); p.drawCharacter(); });
  requestAnimationFrame(animate);
}

function checkWin(player) {
  if (player.score >= targetScore) {
    endGame();
  }
}

function endGame() {
  gameRunning = false;
  clearInterval(timerId);
  timerBar.style.display = "none";
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPodiumAndWinners();

  for (let i = 0; i < 200; i++) {
    confetti.push(new Confetti(canvas.width/2, canvas.height/4));
  }
  animateConfetti();

  playAgainBtn.style.display = "block";
}

function drawPodiumAndWinners() {
  const baseY = canvas.height - 100;
  const podiumWidth = 150;
  let ranking = [...players].sort((a, b) => b.score - a.score);

  ctx.fillStyle = "rgba(0,0,0,0.6)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "#aaa";
  ctx.fillRect(canvas.width/2 - podiumWidth - 50, baseY - 100, podiumWidth, 100);

  ctx.save();
  ctx.shadowColor = "gold"; ctx.shadowBlur = 40;
  ctx.fillStyle = "#ffd700";
  ctx.fillRect(canvas.width/2 - podiumWidth/2, baseY - 150, podiumWidth, 150);
  ctx.restore();

  ctx.fillStyle = "#cd7f32";
  ctx.fillRect(canvas.width/2 + podiumWidth/2 + 50 - podiumWidth, baseY - 80, podiumWidth, 80);

  if (ranking[0]) { ranking[0].x = canvas.width/2; ranking[0].y = baseY - 150; ranking[0].drawCharacter(); }
  if (ranking[1]) { ranking[1].x = canvas.width/2 - podiumWidth; ranking[1].y = baseY - 100; ranking[1].drawCharacter(); }
  if (ranking[2]) { ranking[2].x = canvas.width/2 + podiumWidth/2 + 10; ranking[2].y = baseY - 80; ranking[2].drawCharacter(); }

  ctx.font = "24px Arial";
  ctx.fillStyle = "white";
  if (ranking[1]) ctx.fillText(`${ranking[1].name} (${ranking[1].score})`, ranking[1].x - 40, ranking[1].y - 60);
  if (ranking[0]) { ctx.save(); ctx.shadowColor = "gold"; ctx.shadowBlur = 30; ctx.fillStyle = "#fffacd"; ctx.fillText(`${ranking[0].name} (${ranking[0].score})`, ranking[0].x - 40, ranking[0].y - 70); ctx.restore(); }
  if (ranking[2]) ctx.fillText(`${ranking[2].name} (${ranking[2].score})`, ranking[2].x - 40, ranking[2].y - 60);
}

function animateConfetti() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPodiumAndWinners();
  confetti.forEach(c => c.update());
  if (confetti.length > 0) requestAnimationFrame(animateConfetti);
}

function showMenu() {
  document.getElementById("menu").style.display = "block";
  canvas.style.display = "none";
  playAgainBtn.style.display = "none";
}
</script>
</body>
</html>

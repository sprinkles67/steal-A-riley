<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Brain Rot Race</title>
<style>
  body {
    margin:0;
    font-family:sans-serif;
    height:100vh;
    background:linear-gradient(135deg, #ffb6e6 50%, #87cefa 50%);
    overflow:hidden;
    position:relative;
  }
  /* repeating 67 background */
  body::before {
    content:"67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67 67";
    position:absolute;
    inset:0;
    font-size:60px;
    line-height:60px;
    color:#ff69b4;
    opacity:0.15;
    white-space:pre-wrap;
    word-wrap:break-word;
    z-index:0;
  }
  .game {
    position:relative;
    width:100%;
    height:100%;
    z-index:1;
  }
  .line.start {
    position:absolute;
    top:0; left:50px;
    width:10px; height:100%;
    background:pink;
  }
  .line.end {
    position:absolute;
    top:0; right:50px;
    width:10px; height:100%;
    background:#333;
  }
  .checkpoint {
    position:absolute;
    width:14px; height:14px;
    background:yellow;
    border-radius:50%;
  }
  .brainrot {
    position:absolute;
    width:20px; height:20px;
    background:#ff7bb0;
    border-radius:50%;
  }
  .player {
    position:absolute;
    width:30px; height:30px;
    border-radius:50%;
    top:50%;
    transform:translateY(-50%);
  }
  .p1 {background:red;}
  .p2 {background:green;}
  .p3 {background:blue;}
  /* podium */
  .podium {
    position:absolute;
    bottom:100px; left:50%;
    transform:translateX(-50%);
    display:flex; align-items:flex-end; gap:20px;
    display:none;
  }
  .podium .spot {
    width:100px; text-align:center;
    background:#ddd; border-radius:6px 6px 0 0;
  }
  .first {height:150px; background:gold;}
  .second {height:120px; background:silver;}
  .third {height:100px; background:#cd7f32;}
  /* scoreboard */
  .scoreboard {
    position:absolute;
    bottom:0;
    left:0;
    width:100%;
    background:#fff8;
    display:flex;
    justify-content:space-around;
    font-size:20px;
    font-weight:bold;
    padding:10px;
  }
</style>
</head>
<body>
  <div class="game">
    <div class="line start"></div>
    <div class="line end"></div>
    <!-- checkpoints -->
    <div class="checkpoint" style="top:20%; left:20%"></div>
    <div class="checkpoint" style="top:40%; left:35%"></div>
    <div class="checkpoint" style="top:60%; left:45%"></div>
    <div class="checkpoint" style="top:30%; left:60%"></div>
    <div class="checkpoint" style="top:70%; left:70%"></div>
    <div class="checkpoint" style="top:50%; left:85%"></div>

    <!-- brainrot collectibles -->
    <div class="brainrot" style="top:25%; left:25%"></div>
    <div class="brainrot" style="top:55%; left:38%"></div>
    <div class="brainrot" style="top:35%; left:62%"></div>
    <div class="brainrot" style="top:75%; left:72%"></div>
    <div class="brainrot" style="top:45%; left:87%"></div>

    <!-- players -->
    <div class="player p1"></div>
    <div class="player p2"></div>
    <div class="player p3"></div>

    <!-- podium -->
    <div class="podium">
      <div class="spot second">2nd</div>
      <div class="spot first">1st</div>
      <div class="spot third">3rd</div>
    </div>

    <!-- scoreboard -->
    <div class="scoreboard">
      <div id="score1">Player 1: 0</div>
      <div id="score2">Player 2: 0</div>
      <div id="score3">Player 3: 0</div>
    </div>
  </div>

<script>
const players = [
  {el: document.querySelector(".p1"), x:60, y:100, score:0, name:"Player 1", scoreEl:document.getElementById("score1")},
  {el: document.querySelector(".p2"), x:60, y:200, score:0, name:"Player 2", scoreEl:document.getElementById("score2")},
  {el: document.querySelector(".p3"), x:60, y:300, score:0, name:"Player 3", scoreEl:document.getElementById("score3")},
];

const brainrots = [...document.querySelectorAll(".brainrot")];
let finished = false;

function update() {
  if(finished) return;

  players.forEach(p=>{
    p.x += Math.random()*4; // move forward
    p.y += (Math.random()-0.5)*3; // wiggle
    p.el.style.left = p.x+"px";
    p.el.style.top = p.y+"px";

    brainrots.forEach(b=>{
      if(!b.collected){
        const bx = b.offsetLeft, by = b.offsetTop;
        if(Math.abs(p.x-bx)<20 && Math.abs(p.y-by)<20){
          b.style.display="none";
          b.collected = true;
          p.score++;
          p.scoreEl.textContent = p.name+": "+p.score;
        }
      }
    });

    if(p.x > window.innerWidth-100){
      endGame();
    }
  });

  requestAnimationFrame(update);
}

function endGame(){
  finished = true;
  const podium = document.querySelector(".podium");
  podium.style.display="flex";

  players.sort((a,b)=>b.score-a.score);

  podium.querySelector(".first").textContent = "1st "+players[0].name+" ("+players[0].score+")";
  podium.querySelector(".second").textContent = "2nd "+players[1].name+" ("+players[1].score+")";
  podium.querySelector(".third").textContent = "3rd "+players[2].name+" ("+players[2].score+")";
}

update();
</script>
</body>
</html>
